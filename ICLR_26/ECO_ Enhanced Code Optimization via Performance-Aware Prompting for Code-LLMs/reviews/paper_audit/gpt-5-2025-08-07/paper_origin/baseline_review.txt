Summary
- The paper presents ECO, a performance-aware prompting framework for code runtime optimization. ECO distills runtime optimization instructions (ROIs) from slow–fast code pairs (Section 3.1; Appendix A.1) and combines (i) a symbolic advisor that issues deterministic bottleneck diagnoses via Code Property Graph (CPG) rules (Section 3.2; Algorithms 1–2; Fig. 2) with (ii) an ROI retriever that selects performance-relevant examples and instructions by matching input-specific performance descriptions (Section 3.3; Fig. 2). ECO is model-agnostic, requires no fine-tuning (Section 1; Section 3), and demonstrates substantial speedups on PIE and Codeforces with multiple models, including up to 7.81× on GPT‑o4‑mini (Table 4) while maintaining correctness. Ablations show both modules contribute and complement each other (Table 3). Runtime is measured with gem5 (Section 4.1.4; Appendix B.3.4).Strengths
- Bold Problem Framing and Motivation
  - The paper clearly defines the gap between correctness and efficiency in code-LLMs and motivates performance-aware guidance beyond pair imitation (Section 1; Fig. 1). This matters for impact and clarity because it positions ECO as addressing a real limitation in current LLM-based optimization approaches.
  - It contrasts compiler IR-level optimizations with program-level bottlenecks that require algorithmic and structural reasoning (Section 1), highlighting novelty in scope and target.
  - The critique of prior pair-based methods encouraging pattern imitation (Section 1; Section 2) frames ECO’s intent-aligned prompting rationale, aiding conceptual soundness.- Novel Performance-Aware Prompting Design
  - ECO distills ROIs that articulate “what changed” and “why it improves efficiency” (Section 3.1; Appendix A.1; Fig. 5), improving interpretability and actionable guidance—key for novelty and clarity.
  - The symbolic advisor uses CPG queries and templates to produce bottleneck diagnoses (Section 3.2; Algorithms 1–2; Fig. 2; Figs. 6–9), demonstrating technical soundness through formal rule–template instantiation.
  - The ROI retriever matches performance characteristics rather than surface code similarity (Section 3.3; Fig. 10; Fig. 4 right), addressing prior RAG limitations and expanding contextual breadth—novelty and practical impact.- Strong Empirical Results Across Models and Datasets
  - ECO significantly improves speedup and percent optimized compared to baselines on PIE, both Best@1 and Best@5 (Table 2), showing experimental rigor and impact.
  - Results generalize across model sizes and to closed-source systems (Table 4), with up to 7.81× speedup on GPT‑o4‑mini, indicating model-agnostic practicality and high impact.
  - OOD evaluation on Codeforces shows ECO’s gains over instruction-only across models (Table 4; Section 4.4), strengthening claims about generalizability and robustness.- Complementary Module Effects Verified via Ablation
  - Ablations demonstrate each module’s independent utility and complementary trade-offs (Table 3), supporting technical soundness: w/o RR has highest correctness (Best@5 ACC 83.45%), w/o SA maintains notable speedup (Best@5 SP 3.10×), and combined ECO yields the best overall (Best@5 SP 3.26×).
  - The text explains why ungrounded ROIs (w/o RR+SA) underperform (Section 4.3), offering interpretation that aligns with observed metrics—clarity and rigor.
  - Case study analysis links retriever stochasticity to optimization variability (Section 4.5; Fig. 3), expanding empirical understanding.- Rigorous Measurement Protocol and Metrics
  - The paper uses gem5 for deterministic, cycle-accurate runtime (Section 4.1.4; Appendix B.3.4), increasing experimental reliability and reproducibility.
  - Defined metrics—Accuracy, Speedup, Percent Optimized with best@k evaluation (Section 4.1.4)—improve clarity and comparability.
  - GCC ‑O3 compilation baseline is reported to isolate improvements beyond compiler optimization (Section 4.1.4), enhancing technical rigor.- Detailed Implementation and Reproducibility
  - Prompts and configurations for ECO and baselines are described (Appendix B.1–B.3; Figs. 11–13), aiding reproducibility.
  - Module and dataset details, including Joern usage and ROI DB construction, are provided (Section 3.1–3.3; Appendix A–C), supporting transparency.- Insightful Analyses and Visualizations
  - The symbolic advisor’s detections distribution and keyword overlap analysis contrast ECO’s retriever against RAG (Fig. 4), clarifying the performance-aware nature of retrieval—experimental insight and clarity.
  - Concrete directive examples spanning algorithms, data structures, libraries, and loops (Figs. 6–9) illustrate how ECO translates rules into actionable prompts—clarity and practical relevance.Weaknesses
- Limited Quantitative Validation of ROI Quality and Coverage
  - No quantitative assessment of ROI correctness, consistency, or coverage is reported (Section 3.1; Appendix A.1). This matters for technical quality because the ROI DB underpins both retriever and rule design; without metrics, its reliability is uncertain.
  - The manual clustering of ROIs into rule–template pairs lacks detail on procedure, inter-annotator agreement, or cluster statistics (Section 3.2: “We manually cluster similar ROIs”), which impacts reproducibility and transparency.
  - The number of total rules/templates, category-wise coverage, and the proportion of failures/unmatched bottlenecks are not reported (“No direct evidence found in the manuscript”), limiting claims about generality.- Symbolic Advisor Evaluation Is Narrow and Missing Precision/Recall
  - Aside from an I/O bottleneck resolution check (Table 7), there is no quantitative evaluation of rule precision/recall across categories (Section 3.2; Appendix A.2; “No direct evidence found”), reducing confidence in rule reliability.
  - Potential false positives/negatives from CPG queries and templates are not characterized (“No direct evidence found”), which matters for technical soundness and correctness stability.
  - Scalability and maintainability of the rule set (e.g., adding new categories, handling edge cases) are not analyzed (Section 3.2; “No direct evidence found”), impacting practicality.- Evaluation Comparability and Dataset Modifications
  - The PIE test set is rebalanced and de-duplicated (Section 4.1.3; Appendix C.1), but changes may hinder direct comparability to prior reported numbers (Appendix D.1), affecting fairness of comparisons.
  - The Codeforces OOD benchmark is custom curated with filters (time limit ≤ 2s, ≥10 test cases) and sampling (Appendix C.2), which may bias task difficulty or bottleneck types without a documented distribution comparison (“No direct evidence found”).
  - The best@k protocol is used (Section 4.1.4), but the number of candidates per method and any differences in decoding or candidate generation are not fully specified (“No direct evidence found”), risking unfairness across baselines.- ROI Retriever Stability and Self-Referential Design
  - The retriever prompts the inference model itself to produce the performance description E_C (Section 3.3), potentially introducing self-bias or leakage; the effects are not studied (“No direct evidence found”), impacting technical soundness.
  - Ablations show w/o RR yields higher correctness (Best@5 ACC 83.45% vs ECO 74.24%, Table 3), indicating the retriever can harm correctness—important for reliability.
  - The case study acknowledges stochastic selection variability and mismatches (Section 4.5; Fig. 3), but mechanisms to control variance or calibrate retrieval quality are not provided (“No direct evidence found”), affecting robustness.- Missing End-to-End Overhead Analysis of ECO Pipeline
  - No runtime/latency breakdown is given for Joern CPG construction and rule querying (Section 3.2; “No direct evidence found”), which matters for deployability in time-sensitive settings.
  - ROI retrieval overhead—embedding computation plus LLM pass for E_C—is not reported (Section 3.3; “No direct evidence found”), limiting practical cost assessment.
  - While gem5 overhead is discussed (Appendix B.3.4), the combined end-to-end optimization time per sample (including prompting, retrieval, analysis) is not measured (“No direct evidence found”), limiting operational insight.- Reporting/Clarity Gaps
  - Some figures/tables are hard to parse (e.g., Figure 3’s stacked percentages and formatting), which affects clarity of error analysis.
  - Key hyperparameters (e.g., retriever top‑k, similarity thresholds, the exact number of rule–template pairs) are not specified (“No direct evidence found”), affecting reproducibility.
  - Claims of “state-of-the-art results” (Section 1; Section 4.4) are not accompanied by a broad set of fine-tuning baselines in the main text (fine-tune results only in Appendix D.2), limiting clarity of comparative positioning.Suggestions for Improvement
- Strengthen ROI Quality and Coverage Quantification
  - Report ROI correctness and coverage metrics by sampling ROIs for human validation (e.g., agreement rates) and automatic checks against fast code edits (Section 3.1; Appendix A.1).
  - Document the clustering procedure used to derive rule–template pairs: criteria, statistics per cluster/category, and inter-rater agreement for manual steps (Section 3.2).
  - Provide counts of rules/templates, category-wise coverage, and the proportion of inputs where no rule/ROI applies; include failure analyses (“No direct evidence found in the manuscript” currently).- Broaden Symbolic Advisor Validation with Precision/Recall Studies
  - Construct a labeled subset across categories (Algorithm, Data Structure, Library, Loop) and report rule precision/recall/F1; extend beyond I/O resolution (Section 3.2; Appendix A.2; Table 7).
  - Analyze false positive/negative cases produced by Joern queries and templates, with qualitative examples and rule refinements (“No direct evidence found” currently).
  - Evaluate scalability by measuring the effort to add new rules/categories and the impact on detection coverage over an expanded dataset (“No direct evidence found” currently).- Improve Evaluation Comparability and Dataset Transparency
  - Provide side-by-side results on the original PIE test set (even if smaller runs) and the curated subset to assess sensitivity to rebalancing (Section 4.1.3; Appendix C.1; Appendix D.1).
  - Characterize the Codeforces dataset’s bottleneck distribution versus PIE (e.g., Fig. 4‑style plots) and justify filtering choices with statistics to reduce bias (Appendix C.2).
  - Specify best@k settings, candidate counts, decoding parameters per method, and ensure uniformity; include sensitivity analysis to k and temperature (Section 4.1.4; “No direct evidence found”).- Stabilize ROI Retriever and Reduce Self-Bias
  - Evaluate the effect of using a separate analysis model for E_C versus the inference model; report correctness/speedup and variance comparisons (Section 3.3).
  - Add calibration or post-retrieval filtering (e.g., consistency checks with symbolic diagnoses) to reduce mismatches; measure impact on ACC and SP (Table 3; Section 4.5).
  - Introduce confidence scores for retrieved ROIs and a fallback to symbolic-only prompts when confidence is low; quantify variance reduction (“No direct evidence found” currently).- Report End-to-End Overheads and Practical Costs
  - Provide timing breakdowns for CPG construction, rule queries, E_C generation, embedding, retrieval, and prompting (Section 3.2–3.3).
  - Measure and report ROI retriever overhead under different embedding models and top‑k; include throughput metrics (“No direct evidence found” currently).
  - Present end-to-end optimization latency per code sample (including gem5 if used) to contextualize deployment scenarios (Appendix B.3.4; “No direct evidence found” currently).- Enhance Reporting and Reproducibility Details
  - Clarify figure/table formatting (e.g., Figure 3), and include a consolidated table of key hyperparameters: retriever top‑k, similarity threshold, total rules/templates (“No direct evidence found” currently).
  - Move fine-tuning comparisons from Appendix D.2 into the main text with consistent settings to support “state-of-the-art” claims (Section 4.4).
  - Provide a complete prompt concatenation example for combined symbolic + ROI prompts (Appendix B.1–B.2), and release counts of ROI DB entries per category for transparency.Score
- Overall (10): 7 — Strong, well-motivated framework with notable empirical gains (Table 2; Table 4; Fig. 2), but limited quantitative validation of rule/ROI quality and pipeline overheads (Section 3.1–3.3; Table 7; “No direct evidence found”).
- Novelty (10): 8 — Distillation of ROIs plus dual guidance via symbolic advisor and performance-aware retrieval (Section 3.1–3.3; Fig. 2; Fig. 10) is a clear departure from pair-only RAG/ICL.
- Technical Quality (10): 6 — Solid algorithms and ablations (Algorithms 1–2; Table 3), yet missing precision/recall for rules, ROI quality metrics, and end-to-end cost analysis (Table 7; “No direct evidence found”).
- Clarity (10): 7 — Generally clear with detailed appendices (Appendix A–C; Figs. 6–9), but some reporting gaps (e.g., retriever top‑k, figure formatting in Fig. 3; “No direct evidence found”).
- Confidence (5): 4 — High confidence based on extensive anchors (Sections 3–4; Tables 2–4; Figs. 1–4, 6–10), but some key quantitative validations are missing, limiting certainty on generality and overheads.